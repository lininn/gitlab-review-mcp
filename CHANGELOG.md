# 更新日志

## [1.0.26] - 2025-11-24

### 🆕 新功能
- 新增 `get_merge_request_changes` 工具，兼容旧版 MCP 客户端的 GitLab MR 变更查询能力
- `get_pull_request_files` 支持更多参数别名与工作目录自动检测，GitHub/GitLab 调用更灵活

### 🔧 改进
- 引入统一的 `enhanceGitlabMergeRequestContext`，可从 MR URL、SSH/HTTPS 仓库链接、projectPath 等多种输入中自动解析项目及 IID
- 扩大参数别名覆盖面，支持 `projectPath`、`mergeRequestUrl` 等字段自动补全

### 🐛 Bug 修复
- 将关键日志改为 `stderr` 输出，避免客户端解析 STDOUT JSON 时遇到 `Unexpected token` 错误
- 修复 404 场景下项目解析 fallback 未触发的问题，提高 GitLab 项目解析成功率

---

## [1.0.24] - 2025-11-24

### 🐛 Bug 修复
- 修复 GitLab API 请求 404 错误：解决 URL 中出现双斜杠 `//` 导致的路径错误
- 改进 API URL 构建逻辑，确保 baseURL 和 endpoint 正确拼接

### 🔧 改进
- 优化 `ApiClient` 类中的 URL 构建逻辑
- 增强对不同 baseURL 格式的兼容性（带或不带尾部斜杠）

---

## [1.0.23] - 2025-11-07

### 🆕 新功能
- 自动化版本升级和发布流程
- 改进的发布脚本和文档
- 增强的版本管理和标签机制
- 优化的构建和测试流程

### 🔧 改进
- 完善发布流程的版本冲突处理
- 优化版本号验证和管理
- 改进发布脚本的错误处理
- 增强CI/CD流程可靠性

### 📚 文档
- 更新发布指南和检查清单
- 完善版本管理说明
- 优化用户安装和验证指南
- 添加常见问题解决方案

### 🛠️ 技术特性
- 基于 Model Context Protocol (MCP)
- 支持命令行参数配置
- 环境变量配置支持
- 自动重试和速率限制处理
- 健康检查和状态监控
- 完整的 CI/CD 流程

---

## [1.0.22] - 2025-11-06

### 🆕 新功能
- 发布流程优化：升级版本号管理
- 自动化发布脚本完善
- 发布文档优化和检查清单补充

### 🔧 改进
- 优化发布流程的可靠性
- 完善版本控制和标签管理
- 增强发布验证机制

### 📚 文档
- 更新发布指南和检查清单
- 完善版本管理说明
- 优化用户安装和验证指南

### 🛠️ 技术特性
- 基于 Model Context Protocol (MCP)
- 支持命令行参数配置
- 环境变量配置支持
- 自动重试和速率限制处理
- 健康检查和状态监控
- 完整的 CI/CD 流程

---

## [1.0.21] - 2025-01-06

### 🔧 改进
- `get_merge_request` 和 `create_merge_request` 兼容 snake_case / camelCase 参数（如 `project_id`、`merge_request_iid`、`source_branch` 等）
- 新增参数类型自动转换逻辑，支持字符串/数字/布尔的灵活输入
- 返回结果中补充请求上下文，便于排查 GitLab API 调用问题
- 自动检测 GitLab 项目：404 时尝试从本地 git remote 或 GitLab 搜索纠正 `project_id`，同时支持省略 `projectId` 参数

## [1.0.20] - 2025-01-06

### 🐛 修复
- 修复 `normalizeProjectId` 函数的项目ID格式验证过于严格的问题
- 增强对 GitLab 项目路径格式的兼容性支持（如 `front-end/wmflight`）
- 添加对中文字符和 Unicode 字符的支持
- 改进 URL 编码处理逻辑，提供更好的向后兼容性
- 增加 fallback 机制和警告日志以提升调试体验

### 🔧 改进
- 放宽项目ID验证的正则表达式规则
- 优化错误处理机制，提供更详细的错误信息
- 增强项目路径编码的鲁棒性

## [1.0.0] - 2024-08-27

### 🆕 新功能
- 初始版本发布
- 支持 GitHub 和 GitLab API
- 10 个 MCP 工具
- 5 种编程语言支持
- 智能代码质量分析
- 批量文件处理
- 错误处理和重试机制

### 🔧 改进
- 完整的 TypeScript 支持
- 模块化架构设计
- 丰富的配置选项

### 📚 文档
- 完整的中英文文档
- 快速开始指南
- 功能对比分析
- 详细的使用示例

### 🛠️ 技术特性
- 基于 Model Context Protocol (MCP)
- 支持命令行参数配置
- 环境变量配置支持
- 自动重试和速率限制处理
- 健康检查和状态监控
